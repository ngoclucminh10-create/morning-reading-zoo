<!DOCTYPE html>
<html>
<head>
    <title>功能测试</title>
</head>
<body>
    <h1>早读神器 - 功能测试</h1>
    <script>
        // 测试模块加载
        const tests = [];

        // 测试1: 检查浏览器支持
        tests.push({
            name: '浏览器支持检查',
            test: () => {
                const hasGetUserMedia = !!(navigator.mediaDevices && navigator.mediaDevices.getUserMedia);
                const hasAudioContext = !!(window.AudioContext || window.webkitAudioContext);
                const hasCanvas = !!document.createElement('canvas').getContext;
                return hasGetUserMedia && hasAudioContext && hasCanvas;
            }
        });

        // 运行所有测试
        window.onload = () => {
            const results = document.createElement('div');
            results.innerHTML = '<h2>测试结果：</h2>';

            tests.forEach(test => {
                const div = document.createElement('div');
                const passed = test.test();
                div.style.color = passed ? 'green' : 'red';
                div.innerHTML = `${passed ? '✓' : '✗'} ${test.name}`;
                results.appendChild(div);
            });

            // 添加说明
            const info = document.createElement('div');
            info.innerHTML = `
                <h2>运行说明：</h2>
                <ol>
                    <li>确保使用HTTPS或localhost访问</li>
                    <li>需要授权麦克风权限</li>
                    <li>建议使用Chrome或Firefox浏览器</li>
                </ol>
                <p><a href="index.html" target="_blank">点击这里打开应用</a></p>
            `;
            results.appendChild(info);

            document.body.appendChild(results);
        };
    </script>
</body>
</html>